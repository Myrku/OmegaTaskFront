<h1 mat-dialog-title class="text-center">Изменить задачу <b>fff</b></h1>
<div mat-dialog-content>
  <div fxLayout="column">
    <mat-form-field>
      <mat-label>Название задачи</mat-label>
      <input matInput [formControl]="name" required>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Описание задачи</mat-label>
      <input matInput [formControl]="desc">
    </mat-form-field>
    <mat-form-field>
      <mat-label>Выберете задачу</mat-label>
      <mat-select [formControl]="api" required (valueChange)="changeSelectedApi()">
        <mat-option *ngFor="let api of apis" value="{{api.id}}">{{api.apiname}}</mat-option>
      </mat-select>
    </mat-form-field>

    <p>
      <mat-checkbox [formControl]="disableSelect" *ngIf="api.value && api.value !== '2'" color="primary">
        <div *ngIf="api.value === '1'">
          Выбрать страну
        </div>
        <div *ngIf="api.value === '3'">
          Выбрать валютную пару
        </div>
      </mat-checkbox>
    </p>

    <!--  Input for get params for api  -->
    <mat-form-field *ngIf="disableSelect.value && api.value !== '2'">
      <mat-label>
        Введите название страны
      </mat-label>
      <input type="text" aria-label="Number" matInput [formControl]="apiparam" [matAutocomplete]="auto">
      <mat-autocomplete #auto="matAutocomplete">
        <div *ngIf="api.value === '1'">
          <mat-option *ngFor=" let option of filteredContries | async" [value]="option.alpha2">
            {{option.name}}
          </mat-option>
        </div>
        <div *ngIf="api.value === '3'">
          <mat-option *ngFor=" let option of filteredForexPairs | async" [value]="option.symbol">
            {{option.symbol}}
          </mat-option>
        </div>
      </mat-autocomplete>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Укажите переодичность выполнения задачи в часах</mat-label>
      <input type="number" matInput [formControl]="period" min="1" required>
    </mat-form-field>


    <div class="row">
      <div class="col">
        <button mat-raised-button class="btn-block" color="success" (click)="updTask()"
                [disabled]="showProgress ||
        name.invalid || api.invalid || period.invalid">
          Сохранить изменения
        </button>

      </div>
      <div class="col">
        <button mat-raised-button class="btn-block" color="warn" (click)="closeUpd()">О
          Отмена
        </button>
      </div>
    </div>

    <mat-error *ngIf="isError" class="mt-2 text-center">
      Ошибка при обновлении задачи
    </mat-error>

    <div class="mt-3" *ngIf="showProgress">
      <mat-progress-bar mode='indeterminate'></mat-progress-bar>
    </div>

  </div>
</div>



